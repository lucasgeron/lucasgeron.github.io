!function(e){e.fn.tipuesearch=function(t){var s=e.extend({contentLocation:"tipuesearch/tipuesearch_content.json",contextBuffer:60,contextLength:60,contextStart:90,debug:!1,descriptiveWords:25,highlightTerms:!0,liveContent:"*",liveDescription:"*",minimumLength:3,mode:"static",newWindow:!1,show:9,showContext:!0,showRelated:!0,showTime:!1,showTitleCount:!0,showURL:!1,wholeWords:!0},t);return this.each((function(){var t={pages:[]};e.ajaxSetup({async:!1});var i=0;if("live"==s.mode)for(var a=0;a<tipuesearch_pages.length;a++)e.get(tipuesearch_pages[a]).done((function(i){var r=e(s.liveContent,i).text();r=r.replace(/\s+/g," ");var c=e(s.liveDescription,i).text();c=c.replace(/\s+/g," ");var h=i.toLowerCase().indexOf("<title>"),n=i.toLowerCase().indexOf("</title>",h+7);if(-1!=h&&-1!=n)var l=i.slice(h+7,n);else l=tipuesearch_string_1;t.pages.push({title:l,text:c,tags:r,url:tipuesearch_pages[a]})}));"json"==s.mode&&e.getJSON(s.contentLocation).done((function(s){t=e.extend({},s)})),"static"==s.mode&&(t=e.extend({},tipuesearch));var r="";function c(e){var t=location.search,s=(new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t)||[,""])[1].replace(/\+/g,"%20");try{s=decodeURIComponent(s)}catch(e){s=unescape(s)}return s||null}function h(a,c){var n="",l=!1,o=!1,g=!0,p=0;found=[];var d=e("#tipue_search_input").val(),u=d.toLowerCase();((u=e.trim(u)).match('^"')&&u.match('"$')||u.match("^'")&&u.match("'$"))&&(g=!1);var _=u.split(" ");if(g){u="";for(var f=0;f<_.length;f++){for(var v=!0,w=0;w<tipuesearch_stop_words.length;w++)_[f]==tipuesearch_stop_words[w]&&(v=!1,o=!0);v&&(u=u+" "+_[f])}_=(u=e.trim(u)).split(" ")}else u=u.substring(1,u.length-1);if(u.length>=s.minimumLength){if(g){if(c){var m=u;for(f=0;f<_.length;f++)for(w=0;w<tipuesearch_replace.words.length;w++)_[f]==tipuesearch_replace.words[w].word&&(u=u.replace(_[f],tipuesearch_replace.words[w].replace_with),l=!0);_=u.split(" ")}var x=u;for(f=0;f<_.length;f++)for(w=0;w<tipuesearch_stem.words.length;w++)_[f]==tipuesearch_stem.words[w].word&&(x=x+" "+tipuesearch_stem.words[w].stem);_=x.split(" ");for(f=0;f<t.pages.length;f++){var b=0,y=t.pages[f].text;for(w=0;w<_.length;w++){if(s.wholeWords)var L=new RegExp("\\b"+_[w]+"\\b","gi");else L=new RegExp(_[w],"gi");if(-1!=t.pages[f].title.search(L))b+=20*t.pages[f].title.match(L).length;if(-1!=t.pages[f].text.search(L))b+=20*t.pages[f].text.match(L).length;if(-1!=t.pages[f].tags.search(L))b+=10*t.pages[f].tags.match(L).length;if(-1!=t.pages[f].url.search(L)&&(b+=20),0!=b)for(var C=0;C<tipuesearch_weight.weight.length;C++)t.pages[f].url==tipuesearch_weight.weight[C].url&&(b+=tipuesearch_weight.weight[C].score);_[w].match("^-")&&(L=new RegExp(_[w].substring(1),"i"),-1==t.pages[f].title.search(L)&&-1==t.pages[f].text.search(L)&&-1==t.pages[f].tags.search(L)||(b=0))}0!=b&&(found.push({score:b,title:t.pages[f].title,desc:y,url:t.pages[f].url}),p++)}}else for(f=0;f<t.pages.length;f++){b=0,y=t.pages[f].text,L=new RegExp(u,"gi");if(-1!=t.pages[f].title.search(L))b+=20*t.pages[f].title.match(L).length;if(-1!=t.pages[f].text.search(L))b+=20*t.pages[f].text.match(L).length;if(-1!=t.pages[f].tags.search(L))b+=10*t.pages[f].tags.match(L).length;if(-1!=t.pages[f].url.search(L)&&(b+=20),0!=b)for(C=0;C<tipuesearch_weight.weight.length;C++)t.pages[f].url==tipuesearch_weight.weight[C].url&&(b+=tipuesearch_weight.weight[C].score);0!=b&&(found.push({score:b,title:t.pages[f].title,desc:y,url:t.pages[f].url}),p++)}if(0!=p){if(s.showTitleCount&&0==i){var R=document.title;document.title="("+p+") "+R,i++}if(l&&(n+='<div id="tipue_search_warning" class="text-white fw-light mt-2 mb-0 fs-7 badge bg-danger me-2">'+tipuesearch_string_2+" "+u+". "+tipuesearch_string_3+' <a id="tipue_search_replaced">'+m+"</a></div>"),1==p?n+='<div id="tipue_search_results_count" class="text-dark fw-light mt-2 mb-0 fs-7 badge bg-body-secondary">'+tipuesearch_string_4:(c_c=p.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),n+='<div id="tipue_search_results_count" class="text-dark fw-light mt-2 mb-0 fs-7 badge bg-body-secondary">'+c_c+" "+tipuesearch_string_5),s.showTime)n+=" ("+(((new Date).getTime()-startTimer)/1e3).toFixed(2)+" "+tipuesearch_string_14+")",s.showTime=!1;n+="</div>",found.sort((function(e,t){return t.score-e.score}));var k=0;n+='<div id="tipue_search_results" class="d-grid gap-2 py-2 ">';for(f=0;f<found.length;f++){if(k>=a&&k<s.show+a){if(n+='<div id="tipue_seach_el" class="card card-animate p-4 "><div class="tipue_search_content_title display-7 my-0 "><a href="'+found[f].url+'"'+r+' class="post-link">'+found[f].title+"</a></div>",s.debug&&(n+='<div class="tipue_search_content_debug">Score: '+found[f].score+"</div>"),s.showURL){var T=found[f].url.toLowerCase();0==T.indexOf("http://")&&(T=T.slice(7)),n+='<div class="tipue_search_content_url"><a href="'+found[f].url+'"'+r+">"+T+"</a></div>"}if(found[f].desc){var E=found[f].desc;if(s.showContext){_=u.split(" ");var W=found[f].desc.toLowerCase().indexOf(_[0]);if(W>s.contextStart){var O=E.substr(W-s.contextBuffer),S=O.indexOf(" ");O=E.substr(W-s.contextBuffer+S),(O=e.trim(O)).length>s.contextLength&&(E="... "+O)}}if(g){_=u.split(" ");for(w=0;w<_.length;w++)if(s.highlightTerms){var j=new RegExp("("+_[w]+")","gi");E=E.replace(j,"<h0011>$1<h0012>")}}else if(s.highlightTerms){j=new RegExp("("+u+")","gi");E=E.replace(j,'<span class="tipue_search_content_bold">$1</span>')}var $="",B=E.split(" ");if(B.length<s.descriptiveWords)$=E;else for(w=0;w<s.descriptiveWords;w++)$+=B[w]+" ";"."!=($=e.trim($)).charAt($.length-1)&&($+=" ..."),n+='<div class="tipue_search_content_text text-justify">'+($=($=$.replace(/h0011/g,'span class="fw-medium"')).replace(/h0012/g,"/span"))+"</div></div>"}}k++}if(n+="</div>",s.showRelated&&g){w=0;for(f=0;f<tipuesearch_related.searches.length;f++)u==tipuesearch_related.searches[f].search&&(l&&(d=u),w||(n+='<div class="tipue_search_related_title">'+tipuesearch_string_15+' <span class="fw-medium">'+d+'</span></div><div class="tipue_search_related_cols">'),n+='<div class="tipue_search_related_text"><a class="tipue_search_related" id="'+tipuesearch_related.searches[f].related+'">',tipuesearch_related.searches[f].before&&(n+='<span class="tipue_search_related_before">'+tipuesearch_related.searches[f].before+"</span> "),n+=tipuesearch_related.searches[f].related,tipuesearch_related.searches[f].after&&(n+=' <span class="tipue_search_related_after">'+tipuesearch_related.searches[f].after+"</span>"),n+="</a></div>",w++);w&&(n+="</div>")}if(p>s.show){var D=Math.ceil(p/s.show),U=a/s.show;if(n+='<nav><div id="tipue_search_foot"><ul id="tipue_search_foot_boxes">',a>0&&(n+='<li role="navigation"><a class="tipue_search_foot_box" accesskey="b" id="'+(a-s.show)+"_"+c+'">'+tipuesearch_string_6+"</a></li>"),U<=2){var q=D;D>3&&(q=3);for(w=0;w<q;w++)n+=w==U?'<li class="current" role="navigation">'+(w+1)+"</li>":'<li role="navigation"><a class="tipue_search_foot_box" id="'+w*s.show+"_"+c+'">'+(w+1)+"</a></li>"}else{(q=U+2)>D&&(q=D);for(w=U-1;w<q;w++)n+=w==U?'<li class="current" role="navigation">'+(w+1)+"</li>":'<li role="navigation"><a class="tipue_search_foot_box" id="'+w*s.show+"_"+c+'">'+(w+1)+"</a></li>"}U+1!=D&&(n+='<li role="navigation"><a class="tipue_search_foot_box" accesskey="m" id="'+(a+s.show)+"_"+c+'">'+tipuesearch_string_7+"</a></li>"),n+="</ul></div></nav>"}}else n+='<div id="tipue_search_warning" class="text-white fw-light mt-2 mb-0 fs-7 badge bg-danger me-2">'+tipuesearch_string_8+"</div>"}else o?n+='<div id="tipue_search_warning" class="text-white fw-light mt-2 mb-0 fs-7 badge bg-danger me-2">'+tipuesearch_string_8+". "+tipuesearch_string_9+"</div>":(n+='<div id="tipue_search_warning" class="text-white fw-light mt-2 mb-0 fs-7 badge bg-danger me-2">'+tipuesearch_string_10+"</div>",1==s.minimumLength?n+='<div id="tipue_search_warning" class="text-white fw-light mt-2 mb-0 fs-7 badge bg-danger me-2">'+tipuesearch_string_11+"</div>":n+='<div id="tipue_search_warning" class="text-white fw-light mt-2 mb-0 fs-7 badge bg-danger me-2">'+tipuesearch_string_12+" "+s.minimumLength+" "+tipuesearch_string_13+"</div>");e("#tipue_search_content").hide().html(n).slideDown(200),e("#tipue_search_replaced").click((function(){h(0,!1)})),e(".tipue_search_related").click((function(){e("#tipue_search_input").val(e(this).attr("id")),h(0,!0)})),e(".tipue_search_foot_box").click((function(){var t=e(this).attr("id").split("_");h(parseInt(t[0]),t[1])}))}s.newWindow&&(r=' target="_blank"'),c("q")&&(e("#tipue_search_input").val(c("q")),h(0,!0)),e(this).keyup((function(e){"13"==e.keyCode&&h(0,!0)}))}))}}(jQuery);